---
layout: post
title: 工作笔记之订单展现页面性能问题刨析
tags: [工作笔记, 性能分析]
image: '/images/posts/1.jpg'
---

写这篇文章时，我本人负责订单展现的业务，会经常出现性能问题，这里列出我所遇到的一些问题和解决方法，方便以后思考。

如果大家又更好的解决方案，请指教。

--- 

用户所看到的每一条数据都是由后台数据库提供的。数据从数据库到用户眼前，又经历了很多不同的程序。

以golang语言为主开发网站的业务服务，虽然简单，快捷，但是业务分布在很多不同的微服务中，很多服务之间相互调用也导致了很多性能问题。

最直接的体现就是页面获取不到数据，或者接口返回数据特别慢。


---

后面分析一下这种问题的原因以及解决方案：

> 可能原因一：大批量的for循环调用其他服务接口
        
虽然很多接口经过优化，速度可以到几毫秒，甚至微秒，但是我们无法保证被调用接口不会出现速度变慢的情况，或者，当for循环的数量因为某一些特殊case变大时，就回导致接口变慢。

解决方案：

1. 代码实现上，避免for循环调用接口，被调用接口可设置批量参数传入，减少服务之间相互调用消耗的时间
2. 从业务方面来说，尽量防止极端case的出现

> 可能原因二：SQL性能比较差

在日常项目中，常常会有因为SQL性能比较差，导致接口查询数据库变慢而引起的性能问题。

解决方案：

1. 在SQL放入代码之前，进行性能测试，例如EXPLAIN。
2. 提前加索引

> 可能原因三：过多的调用其他服务

一个页面的数据来自多和不同的底层服务，获取所有的数据，需要整合无数微服务，这也会导致性能问题。

解决方案：

1. 对热数据在本地服务做保存，当获取的时候，不需要再次调用其他服务获取。
        
> 可能原因四：调用其他服务接口时，传参文件过大

这种一般出现在支持批量查询的接口上。

解决方案：

1. 对于批量查询的接口，参数的数量做一定现在，反正参数文件或者返回文件过大，传输过慢或者失败。

