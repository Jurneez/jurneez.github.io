---
layout: post
title: 操作系统之内存溢出（memory leak）
tags: [os], memory-leak]
image: '/images/posts/3.jpg'
---

#### 内存泄漏和内存溢出

> 内存泄漏 memory leak

当我们为一个对象申请了内存资源后，当程序结束，该对象占有的内存资源应该被释放并被回收进而分配给后续的对象，但是内存没有被释放回收，这种情况就是内存泄漏（memory leak）。

> 内存溢出 out of memory

内存资源被用光，当系统再次申请内存资源时，发现没有可分配的内存资源，这种就是内存溢出（out of memory）。

#### 如何判定内存泄漏了呢？

不像代码bug，可以通过控制台输出来调试，查看，内存泄漏并没有明显症状，在前期是很难发现的。根据内存泄漏的定义我们会发现，存在内存泄漏的情况下，一旦内存被分配，便不会再再次被回收，所以可以通过查看内存分析图，看随着时间和应用的下线，内存的占用情况。如果内存使用占比持续增长，几乎不存在下降的情况，基本可以认定为内存泄漏。

#### 产生内存泄漏的原因有哪些呢？

究其本质，内存泄漏的原因是因为 内存申请的操作`malloc/new` 多于 释放内存的操作`free/delete`。

#### 发生内存泄漏后，要怎么办呢？

关于内存泄漏发生后的补救方法，目前还没有什么好的方法，只能在平时写代码的时候尽可能避免。
